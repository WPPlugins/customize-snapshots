var CustomizeSnapshotsPreview=function(a,b){"use strict";var c={data:{home_url:{scheme:"",host:"",path:""},rest_api_url:{scheme:"",host:"",path:""},admin_ajax_url:{scheme:"",host:"",path:""},initial_dirty_settings:[],queried_object_rest_api_url:null}};return c.init=function(a){_.extend(c.data,a),c.injectSnapshotIntoAjaxRequests(),c.handleFormSubmissions(),c.setupSendingQueriedObjectRestApiUrl()},c.getCustomizeQueryVars=function(){var b={};return a.each(function(a){(a._dirty||-1!==_.indexOf(c.data.initial_dirty_settings,a.id))&&(b[a.id]=a.get())}),{wp_customize:"on",theme:a.settings.theme.stylesheet,nonce:a.settings.nonce.preview,customized:JSON.stringify(b)}},c.injectSnapshotIntoAjaxRequests=function(){b.ajaxPrefilter(c.prefilterAjax)},c.prefilterAjax=function(a,d,e){var f,g,h,i,j,k;g=document.createElement("a"),g.href=a.url,i=g.host===c.data.home_url.host&&0===g.pathname.indexOf(c.data.home_url.path),j=g.host===c.data.rest_api_url.host&&0===g.pathname.indexOf(c.data.rest_api_url.path),k=g.host===c.data.admin_ajax_url.host&&0===g.pathname.indexOf(c.data.admin_ajax_url.path),(i||j||k)&&(f=a.type.toUpperCase(),"POST"!==f&&(e.setRequestHeader("X-HTTP-Method-Override",f),a.type="POST"),a.data&&"GET"===f&&(g.search.substr(1).length>1&&(g.search+="&"),g.search+=a.data),a.data?a.data+="&":a.data="",h=c.getCustomizeQueryVars(),h.wp_customize_preview_ajax="true",a.data+=b.param(h))},c.handleFormSubmissions=function(){b(function(){_.defer(function(){c.replaceFormSubmitHandler()})})},c.replaceFormSubmitHandler=function(){var c=b(document.body);c.off("submit.preview"),c.on("submit.preview","form",function(c){var d;c.isDefaultPrevented()||"GET"!==this.method.toUpperCase()||(d=document.createElement("a"),d.href=this.action,d.search.substr(1).length>1&&(d.search+="&"),d.search+=b(this).serialize(),a.preview.send("url",d.href)),c.preventDefault()})},c.setupSendingQueriedObjectRestApiUrl=function(){a.bind("preview-ready",function(){a.preview.bind("active",function(){a.preview.send("queried-object-rest-api-url",c.data.queried_object_rest_api_url)})})},c}(wp.customize,jQuery);